<ion-content class="background" scroll="true">

    <ion-grid class="ion-no-margin ion-no-padding justify-content-center">
        <ion-row class="ion-no-margin ion-no-padding">
            <ion-col class="ion-no-margin ion-no-padding" size-sm="8"
                offset-sm="2" size-md="6" offset-md="3" size-xl="4"
                offset-xl="4">

                <div class="title-container">
                    <h2 class="title"><strong>Add to Home Screen</strong></h2>
                    <h3 class="title"><strong>For Offline Use</strong></h3>
                    <div *ngIf="showInstallButton">
                        <p>To use this application offline, press the "add"
                            button to add it to your phone or desktop
                            homescreen.
                        </p>
                        <button
                            class="button"
                            id="signin"
                            (click)="addToHomeScreen">
                            <ion-icon class="button-icon" name="add-outline"
                                size="large"></ion-icon>
                            Add
                        </button>
                    </div>
                    <div *ngIf="!showInstallButton">
                        <p>Google how to add a PWA to {{this.browser}}
                        </p>

                    </div>

                </div>

                <div class="title-container">
                    <h2 class="title"><strong>Auto-generated Audio</strong></h2>

                    <div *ngIf="(auth.isAuthenticated$ | async) === false">

                        <p>
                            <ion-icon name="log-in-outline" size="large"
                                aria-hidden="true"
                                class="inline-icon"></ion-icon>
                            <strong>Sign in</strong> to turn on the
                            autogenerated

                            audio <ion-icon name="volume-high"
                                aria-hidden="true"
                                class="inline-icon"></ion-icon>
                            feature to hear what each conjugation sounds like.
                            <br>
                            <ion-icon name="information-circle" size="large"
                                aria-hidden="true"
                                class="inline-icon"></ion-icon>
                            <strong>Note:</strong> You must have been given
                            express
                            permission to use this feature.
                            If you do not have permission, you will not be able
                            to
                            sign up.
                        </p>

                    </div>

                    <div *ngIf="auth.isAuthenticated$ | async">

                        <p *ngIf="auth.user$ | async as user">
                            <ion-icon name="checkmark-circle"
                                class="inline-icon"></ion-icon>

                            You have successfully signed in as {{ user.name }}
                        </p>

                    </div>

                    <div *ngIf="errorMessage">
                        <ion-text color="danger">
                            <p>{{ loginError }}</p>
                        </ion-text>
                    </div>

                    <div
                        class="icon-form-field"
                        *ngIf="(tts.ttsEnabledAndAuthenticated$ | async) && (this.tts.speakers$ | async)?.length > 0">

                        <ion-card class="alert-card">

                            <ion-card-header><strong>Select a
                                    speaker</strong></ion-card-header>
                            <ion-card-content>
                                <div class="voice-select">
                                    <div class="voice-icon-wrapper">
                                        <ion-icon name="person-circle"
                                            class="person-icon"></ion-icon>
                                        <ion-icon name="volume-high"
                                            class="volume-overlay"></ion-icon>
                                    </div>

                                    <ion-select
                                        class="speakerSelect"
                                        interface="popover"
                                        [(ngModel)]="defaultSpeaker.display"
                                        (ionChange)="ttsSpeakerChange($event)"
                                        name="speaker"
                                        placeholder="TTS Voice">
                                        <ion-select-option
                                            *ngFor="let s of (this.tts.speakers$ | async)"
                                            [value]="s">
                                            {{ s.display }}
                                        </ion-select-option>
                                    </ion-select>
                                </div>
                            </ion-card-content>
                        </ion-card>

                        <ion-card color="warning" class="alert-card">
                            <ion-card-header>
                                <ion-icon name="alert-circle" size="large"
                                    aria-hidden="true"
                                    class="inline-icon"></ion-icon>
                                <strong>Important</strong>
                            </ion-card-header>

                            <ion-card-content>
                                <p>
                                    Now that you're logged in, you're able to
                                    click
                                    on the

                                    <strong>audio icon</strong>
                                    <ion-icon name="volume-high" size="medium"
                                        aria-hidden="true"
                                        class="inline-icon"></ion-icon>
                                    next to the words
                                    that you create. Once you do that, we'll
                                    play an
                                    auto-generated audio using text-to-speech.
                                </p>
                                <p>
                                    This audio may sound like a real person you
                                    know, but they have <strong>not</strong>
                                    recorded these words,
                                    and any errors in pronunciation are due to
                                    errors in the computer text-to-speech
                                    system.
                                </p>
                            </ion-card-content>
                        </ion-card>

                    </div>

                    <button
                        *ngIf="(auth.isAuthenticated$ | async) == false"
                        class="button"
                        id="signin"
                        (click)="login()">
                        <ion-icon class="button-icon" name="log-in-outline"
                            size="large"></ion-icon>
                        Sign in
                    </button>

                    <button
                        *ngIf="auth.isAuthenticated$ | async"
                        class="button"
                        id="signout"
                        (click)="logout()">
                        <ion-icon class="button-icon" name="log-out-outline"
                            size="large"></ion-icon>
                        Sign out
                    </button>
                </div>
            </ion-col>
        </ion-row>
    </ion-grid>

</ion-content>
